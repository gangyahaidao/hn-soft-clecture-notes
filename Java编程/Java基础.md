## 第一部分	Java编程基础与二进制

> 创建：讯飞人工智能学院
>
> 时间：2020-01-29

### 第1章 【编程基础】

#### 1.1 计算机的组成结构

主要由CPU、内存、硬盘和输入/输出设备组成。

#### 1.2 数据类型和变量

数据类型用于对数据进行归类，便于理解和编程操作。对于Java语言而言，有如下基本数据类型：

- 整数类型：4种，**byte/short/int/long**，分别有不同的取值范围
- 小数类型，2种，**float/double**，有不同的取值范围和精度
- 字符类型，**char**，两个字节，表示单个字符
- 真假类型，**boolean**，表示真假

Java是面向对象的语言，除了基本数据类型，其他都是对象类型。对象到底是什么？简单来说，对象是由基本数据类型、数组和其他对象学籍组合而成的一个东西，以方便对其整体进行操作。比如一个学生对象，可以由让如下信息组成：

- 姓名：一个字符数组；
- 年龄：一个整数；
- 性别：一个字符；
- 入学分数：一个小数；

---

##### 1.2.1 计算机如何进行数据的操作？

​		世界万物都是由元素周期表中的元素组成的，基本数据类型就相当于元素周期表中的元素，组成的对象就相当于世界万物。

​		计算机为了进行数据操作，需要将数据放入内存中。所谓**内存**在程序看来就是一块有地址编号的连续的空间，数据放到内存中的某个位置后，为了方便找到和操作这个数据，需要给这个位置起个名字。编程语言通过**变量**这个概念来表示这个过程。

​		如何声明一个变量？可以这样操作，如：`int a;`这个语句的作用就是在内存中分配了一块空间，并且规定这块空间存储int类型的数据，名字a指向了这块空间的首地址，通过对a的操作即可操作这一块空间，比如：`a = 5;`这个操作即可将a指向的内存空间的值修改为5。

​		所以，**变量就是给数据起名字，方便找不同的数据，他存储的值可以变化，但是一般应该取一个见文知义的名字，不能随便取**。通过声明变量，每个变量赋予一个数据类型和一个有意义的名字，我们就告诉了计算机要操作的数据。有了数据，如何对数据进行操作呢？看一个最简单的：**赋值操作**。

---

##### 1.2.2 赋值操作 `=`

​		声明变量在内存中分配一块位置，但这个位置的内容是不确定的，赋值就是把这块位置的内容设置为一个确定的值。（`*Java中基本年数据类型、数组、对象的赋值有明显的不同，本节介绍基本数据类型和数组的赋值，后面再介绍对象的赋值*`）

**（1）整数类型**

​		Java中整数类型有byte、short、int、long，分别占1、2、4、8个字节。取值范围如下：

<img src="C:\Users\My\AppData\Roaming\Typora\typora-user-images\image-20200129132953121.png" alt="image-20200129132953121" style="zoom:80%;" />

​		赋值语法就很简单了，直接把数字常量赋值给变量即可，但要注意：**常量不能超过对应类型的表示范围**。如：

```java
byte b = 23;
short ss = 3333;
int ii = 9999;
long ll = 32333L;
```

注：在给long类型赋值时，如果常量超了int的表示范围，需要在常量后面加大写或小写的字母L，如:

`long ll = 3232343433L;`之所以加L，是因为数字常量默认是按int类型存储的。

**（2）小数类型**

​		小数类型有**float**和**double**，占用的内存空间字节分别是4字节和8字节，有不同的取值范围和精度，double表示的范围更大，精度更高：

![image-20200130164359436](C:\Users\My\AppData\Roaming\Typora\typora-user-images\image-20200130164359436.png)

小数常量默认使用double类型，所以对于double，可以直接进行赋值，如：`double d = 333.33;`，但对于float，需要在数字后面添加字母F或者f，如：`float ff = 333.33f;`，当然也可以直接把整数类型赋值给浮点型。

**（3）真假类型**

​		真假类型直接使用true或false赋值，如：`boolean b = true;`或者`b = false;`

**（4）字符类型**

​		字符类型**char**用于表示一个字符，这个字符可以是中文字符，也可以是英文字符，占用内存空间是2个字节，赋值是使用单引号把字符常量括起来，不要使用双引号，双引号是用在字符串上的，如：

```java
char c = 'A';
char z = '马';
```

*注：大部分的常用字符用一个char就可以表示，但有特殊字符用一个char是表示不了；*

---

##### 1.2.3 数组类型

​		基本类型的数组有3种定义赋值形式，如：

```java
int[] arr = {1, 2, 3}; // 预先知道数组的内容可以采用此种形式 - 隐式初始化
int[] arr2 = new int[]{1, 2, 3}; // 预先知道数组内容可以采用此形式 - 静态初始化
int[] arr3 = new int[3]; // 预先分配数组的长度（元素值默认是0），之后再进行赋值，此种形式使用较多 - 动态初始化
// 赋值
arr3[0] = 1; arr3[1] = 2; arr[2] = 3;
```

​		数组长度也可以动态确定，如：

```java
int length = ....; // 根据一些条件动态计算
int[] arr = new int[length];
```

*注：数组长度虽然可以动态确定，但定义了之后就不可以改变，即length属性只能读，不能进行修改；*

*另外，不能在给定初值的时候给定长度，此种形式是不允许的：`int[] arr = new int[3]{1, 2, 3};`*

##### 1.2.4 基本类型和数组类型有什么区别？

​		数组类型和基本类型的不同主要是体现在内存中的存储形式上：基本类型变量，内存中只会有一块对应的内存空间；但是数组有两块空间，一块用于存储数组内容本身，另一块用于存储内容的地址；如下表：

![image-20200225234311006](C:\Users\My\AppData\Roaming\Typora\typora-user-images\image-20200225234311006.png)

​	基本类型**a**的内存地址是0x1000，这个位置存储就是它的值100；数组类型**arr**的内存地址是0x2000，这个位置存储的是数组真实数据的首地址0x3000，而0x3000开始的位置存储才是实际的数据：1， 2， 3，所以数组类型的两块空间数据是：数组变量arr本身的地址，以及所存储数据分配的空间。

​		基于上面的了解，下面看如下代码：

```java
int[] arrA = {1, 2, 3, 4};
int[] arrB = {5, 6, 7};
arrA = arrB;
```

问：变量arrB是把存储的数组内容复制给了arrA，还是只把数组的首地址赋值给了arrA？

​		编写一个测试程序通过打印arrA和arrB的值会发现，arrB只是把数组的首地址赋值给了arrA，而不是把所存储的数据全部复制了一份，即arrA的值变成了数组{5, 6, 7}的首地址，此时arrA和arrB都指向了同一块数据，如下图：

<img src="C:\Users\My\AppData\Roaming\Typora\typora-user-images\image-20200130174721716.png" alt="image-20200130174721716" style="zoom:80%;" />

*注：以上也可以看出，给数组变量赋值和给数组中元素赋值是来那个回事，给数组中元素赋值是改变数组内容，而给数组变量赋值则会让变量指向一个不同的位置。*

我们在内存中定义了变量之后，数据会被加载到CPU中进行运算，那么数据可以进行哪些运算呢？

---

#### 1.3 基本运算

​		Java中基本类型数据的运算主要包括：

- 算术运算，主要是进行+、-、*、/、%、++、--
- 比较运算，主要是>、<、>=、<=、!=等
- 逻辑运算，针对布尔值进行，如&、|、&&、||、!等

*注：此处内容不详细讲解，做完指定的练习即可完全掌握*

---

#### 1.4 条件执行语句

​		流程控制语句最基本的就是条件执行，也就是说，一些操作只能在某些条件满足的情况下执行，另一些操作在其他条件下执行，就像交通控制中的红绿灯，红灯停、绿灯行条件执行。

##### 1.4.1 if-else语句

Java中语法如下：

```java
if (条件语句) {
	代码块	
} else {
    代码块
}
// 示例
int a = 10;
if(a%2 == 0) {
    System.out.println("a是偶数");
} else {
    System.out.println("a是奇数");
}
```

*注：上一节介绍的基本运算中，有一个条件运算，跟is-else语句结构比较像，叫三元运算符，语法如下：*

*`判断条件 ? 表达式1 ： 表达式2`；如求两个数的最大值：`int max = x > y ? x : y;`*

​		如果有多个判断条件，则可以使用if-else组合形式，如下：

```java
if (条件1) {
	代码1
} else if (条件2) {
	代码2
} .....
else if(条件3) {
	代码3
} else {
	代码4
}
```

##### 1.4.2 switch-case语句

​		在判断语句中如果判断的变量有多种取值，如进行星期判断就有7种，根据英文字母判断有26种可能，此时再使用if-else结构就比较烦琐，这些情况可以使用switch语句，语法如下：

```java
switch (表达式) { // 其中表达式的值可以是byte、short、int、char、enum枚举、String
	case 值1:
		代码1；break;
	case 值2:
		代码2； break;
	case 值3:
		代码3;break;
	.....
	default:
		代码n+1;break;
}
```

总结，条件执行语法整体是比较自然和容易理解的，只是需要注意一些其中的语法细节和陷阱，晚上对应的练习进行巩固即可。

条件语句只能单次执行指定的语句，如果想要循环执行某一些语句怎么办？

---

#### 1.5 循环语句

循环应用的地方有很多，比如：

- 展示照片，我们查看手机上的照片，背后的程序需要将照片一张张的展示出来；
- 播放音乐，我们听音乐，背后程序按照播放列表一首首播放给我们；
- 查看消息，我们浏览朋友圈消息，背后的程序将消息一条条展示出来；
- 日常办公中的很多操作也需要依赖循环来完成，如在文件中查找某个词、使用Excel对数据进行汇总、群发祝福消息给好友等

Java中循环有4种形式，分别为while、do-while、for、foreach，下面分别进行介绍：

**（1）while**

​		while语法为：

```java
while(条件语句) { // 条件语句为真则执行循环代码块
	代码块
}
```

**（2）do-while**

​		do-while语法为：

```java
do {
	代码块
}while(条件语句)
```

如果不管条件语句是什么，代码块都会执行至少一次，此时可以使用do-while循环。

**（3）for**

for循环是实际使用中最为广泛循环语法，尤其在循环次数已知的情况下，语法为：

```java
for(初始化语句; 循环条件; 步进操作) {
	循环体
}
```

for循环简化了书写，但执行过程对初学者而言不是那么明显，它的执行流程如下：

```java
1）执行初始化语句；
2）检查循环条件是否为true，如果为false跳转到第6）步；
3）循环条件为真，执行循环体；
4）执行步进操作；
5）步进操作执行完后，跳转到2），即继续执行循环条件；
6）结束循环，继续执行for循环后面的语句
下面是一个简单的for循环：
int[] arr = {1, 2, 3, 4};
for (int i = 0; i < arr.length; i++) {
    System.out.println(arr[i]);
}
```

*注：for(;;) {....}结构作用与while(1){....}一样*

**（4）foreach**

foreach不是一个关键字，它使用冒号:，冒号前面是循环中的每个元素，包括数据类型和变量名称，冒号后面是要遍历的数据或者集合，每次循环元素都会自动更新；对于不需要使用索引变量，只是简单遍历的情况，foreach语法相比于for语句更为简洁，语法如下：

```java
int[] arr = {1, 2, 3, 4};
for (int element : arr) {
	System.out.println(element);
}
```

**（5）循环控制语句**

​		在循环的时候，一般会以循环条件作为是否结束的依据，但有时候会需要根据别的条件提前结束循环或者跳过一些代码，这种情况怎么处理？此时可以使用**break**和**continue**关键字对循环进行控制：

- break：用于提前结束循环，用于跳出当前循环体，开始执行循环后面的语句，示例代码如下：

<img src="C:\Users\My\AppData\Roaming\Typora\typora-user-images\image-20200131101833841.png" alt="image-20200131101833841" style="zoom:80%;" />

*注：如果找到了，会调用 break，break执行后会跳转到循环外面，不会再执行`i++`语句*

- continue：在循环过程中，有的代码可能不需要每次循环都执行，此时可以使用continue语句，会跳过循环体中剩余的代码，然后执行步进操作，示例代码如下：

<img src="C:\Users\My\AppData\Roaming\Typora\typora-user-images\image-20200131102202291.png" alt="image-20200131102202291" style="zoom:80%;" />

*注：上面的代码用于统计数组中值等于toSearch的元素的个数，如果值不等于toSearch，则跳过剩下的循环代码，执行`i++`*

---

#### 1.6 函数的用法

​		如果需要经常做某一种操作，则类似的代码需要重复写很多遍。比如在数组中查找某个数，第一次查找一个数，第二次查找另一个数，每查找一个数，类似的代码都需要重写一遍，很啰嗦；另外更重要的，有一些复杂的操作，可能分为很多个步骤，如果都放在一起，则代码难以理解和维护；计算机程序使用**函数**来解决这个问题，即使<font color=#1E90FF>用函数来减少重复代码和分解复杂操作</font>。

​		函数这个概念，我们在数学中已经接触过，其基本格式是y = f(x)，表示x到y的对应关系，给定输入x，经过函数变换f，输出y。程序中的函数概念与其类似，也由输入、操作和输出组成，由一个子程序来实现，子程序有一个名字，表示它的目的（类比f），有零个或多个参数（类比x），有可能返回一个结果（类比y），示例如下：

```java
修饰符  返回值类型 函数名字（参数类型 参数名字; .....） {
    操作
    return 返回值
}
定义示例：
public int sum(int a, int b) {
	int sum = a + b;
	return sum;
}
方法调用示例：
int result = sum(10, 20);
```

函数的名字是sum，它的目的是对输入的两个数求和，有两个输入参数，分别是int整数a和b，求和结果放在变量sum中，然后使用return语句返回，最开始的public是函数的修饰符。

​		Java中，任何函数都需要放在一个类中，我们暂时可以把类看做函数的一个容器，即函数放在类中，类中包含多个函数，Java中的函数一般叫做<font color=#1E90FF>方法</font>。方法的定义和基本调用应该是比较容易理解的， 但是还有一些细节需要详细讲解一下，包括参数传递，返回，函数命名，调用过程等。

**（1）参数传递**

基本数据类型传递比较简单，重点讲解两种特殊类型的参数：数组和可变长度的参数：

**1）数组**

数组作为参数与基本类型是不一样的，在函数内修改数组中的元素会修改调用者中的数组内容，示例如下：

<img src="C:\Users\My\AppData\Roaming\Typora\typora-user-images\image-20200131114422813.png" alt="image-20200131114422813" style="zoom:80%;" />

*注：在reset函数内给参数数组元素赋值，在main函数中数组arr的值也会变。*

这个比较容易理解，前面介绍过一个数组变量有两块空间，一块用于存储数组内容本身，另一块用于存储内容的位置，给数组变量赋值不会影响原有的数组内容本身，而只会让数组变量指向一个不同的数组内容空间。在上例中，函数参数中的数组变量arr和main函数中的数组变量arr存储的都是相同的位置，而数组内容本身只有一份数据，所以，在reset中修改数组内容和在main中修改是完全一样的。

**2）可变长度的参数**

​		前面介绍的函数，参数个数都是固定的，但有时候会遇到参数个数是变化的情况，比如求若干个数的最大值，可能是两个，也可能是任意多个。Java支持可变长度的参数，示例如下：

<img src="C:\Users\My\AppData\Roaming\Typora\typora-user-images\image-20200131125952744.png" alt="image-20200131125952744" style="zoom:80%;" />

从例子中可以明显看出，可变长度参数的语法是在数据类型后面加三个点"..."，在函数内，可变长度参数可以看做是数组；可变长度参数必须是参数列表中的最后一个，一个函数也只能有一个可变长度的参数。实际上，可变长度参数会转换为数组参数，即max(int min, int...a)会被转换为max(int min, int[] a)，使用可变长度参数主要是简化了代码书写。

**（2）函数重复的命名**

同一个类中，函数可以重名，但是参数不能完全一样，即要么参数个数不同，要么参数个数相同但至少有一个参数类型不一样；同一个类中函数名相同但是参数不同的现象，称为<font color=#1E90FF>函数重载</font>，为什么需要函数重载呢？一般是因为函数想表达的意义是一样的，但参数个数或类型不一样，比如求两个数的最大值，在Java的Math库中就定义了4个函数，如下：

```java
public static double max(double a, double b);
public static float max(float a, float b);
public static long max(long a, long b);
public static int max(int a, int b);
```

**（3）递归函数**

函数大部分时候都是被其他函数调用，但其实函数自己也可以调用自己，调用自己的函数就叫<font color=#1E90FF>递归函数</font>，为什么需要自己调用自己呢？看一个经典的计算阶乘的例子：

```java
public static long factorial(int n) {
    if (n == 0) {
        return 1;
    } else {
        return n*factorial(n-1);
    }
}
```

递归调用虽然很方便，但是运行开销比较高，要注意。

**（3）函数调用进阶：函数调用的基本原理**

具体参看文档：https://shimo.im/docs/Dh9kJPwhHRgDPGCr/ 《函数调用原理》

---



### <font color=#2E64FE>第2章 【理解数据背后的二进制】</font>

请先思考以下问题：

- 两个正数相乘的结果（如2147483647*2==-2）为什么会出现负数？
- 非常基本的小数运算结果（如0.1f*0.1f）居然不准确
- 字符类型为什么可以进行算术运算和比较？

要理解这些行为，我们需要理解数值和文本字符在计算机内部二进制表示，是非常重要的内容。

#### 2.1 整数的二进制表示与位运算

参看文档：https://shimo.im/docs/xDDvkKYXhCCXRrhq/ 《整数的二进制表示与位运算》

---

#### 2.2 小数的二进制表示

参考文档：https://shimo.im/docs/dvHrvPhc9XXdkGW8/ 《小数的二进制表示》

---

#### 2.3 字符的编码与乱码问题

参看文档：https://shimo.im/docs/hWCD3yC6Pp6VtxjV/ 《字符的编码与乱码》

---

#### 2.4 char的真正含义

参看文档：https://shimo.im/docs/x9dq3hJ6vQHPprgY/ 《char的真正含义》

---



## 第二部分	面向对象

### <font color=#2E64FE>第3章 【类与对象、封装、构造方法】</font>

#### 本章内容 

- 面向对象
- 类与对象
- 三大特征之一（封装）
- 构造方法

#### 教学目标

- [x] 能够理解面向对象的思想
- [x] 能够明确类与对象关系
- [x] 能够掌握类的定义格式
- [x] 能够掌握创建对象格式，并访问类中的成员
- [x] 能够完成手机类的练习
- [x] 能够理解对象的内存图
- [x] 能够说出成员变量和局部变量的区别
- [x] 能够理解private关键字的含义
- [x] 能够说出this关键字可以解决的问题
- [x] 能够理解构造方法的含义
- [x] 能够用封装的思想定义一个标准类

#### 3.1 面向对象思想

##### 3.1.1 面向对象思想概述

​		Java语言是一种面向对象的程序设计语言，而面向对象思想是一种程序设计思想，我们在面向对象思想的指引下，使用Java语言去设计、开发计算机程序。 这里的**对象**泛指现实中一切事物，每种事物都具备自己的**属性**和**行为**。面向对象思想就是在计算机程序设计过程中，参照现实中事物，将事物的属性特征、行为特征抽象出来，描述成计算机事件的设计思想。 它区别于面向过程思想，强调的是通过调用对象的行为来实现功能，而不是自己一步一步的去操作实现。

##### 举例

洗衣服：

- ```tex
  面向过程：把衣服脱下来 -->找一个盆-->放点洗衣粉-->加点水-->浸泡10分钟-->揉一揉-->清洗衣服-->拧干-->晾起来
  面向对象：把衣服脱下来 -->打开全自动洗衣机-->扔衣服-->按钮-->晾起来
  ```

区别：

- ```tex
  面向过程：强调步骤。
  面向对象：强调对象，这里的对象就是洗衣机。
  ```

特点：

​		面向对象思想是一种更符合我们思考习惯的思想，它可以将复杂的事情简单化，并将我们从执行者变成了指挥者。面向对象的语言中，包含了三大基本特征，即**封装、继承和多态**。

----

##### 3.1.2 类和对象

​		环顾周围，你会发现很多对象，比如桌子，椅子，同学，老师等。桌椅属于办公用品，师生都是人类。那么什么是类呢？什么是对象呢？

<font color=#1e90FE>什么是类</font>

- 类 ：是一组相关属性和行为的集合。可以看成是一类事物的模板，使用事物的属性特征和行为特征来描述该
  类事物。

现实中，描述一类事物：

- 属性 ：就是该事物的状态信息。
- 行为 ：就是该事物能够做什么。

举例：小猫

属性：属性：名字、体重、年龄、颜色。 行为：走、跑、叫。

<font color=#1e90FE>什么是对象</font>

- 对象 ：是一类事物的具体体现。对象是类的一个实例（对象并不是找个女朋友），必然具备该类事物的属性
  和行为。

现实中，一类事物的一个实例。

举例：一只小猫。
属性：tom、5kg、2 years、yellow。 行为：溜墙根走、蹦跶的跑、喵喵叫。

<font color=#1e90FE>类与对象的关系</font>

- 类是对一类事物的描述，是 抽象的。
- 对象是一类事物的实例，是 具体的。
- 类是对象的模板，对象是类的实体 。

![image-20200204162317721](C:\Users\My\AppData\Roaming\Typora\typora-user-images\image-20200204162317721.png)

---

##### 3.1.3 类的定义

##### 事物与类的对比

现实世界的一类**事物**：
**属性**：事物的状态信息。 **行为**：事物能够做什么。
Java中用class描述事物也是如此：

- **成员变量**：对应事物的属性 	

- **成员方法**：对应事物的行为

##### 类的定义格式：

```java
public class CalssName {
	// 成员变量
	// 成员方法
}
```

- 定义类 ：就是定义类的成员，包括成员变量和成员方法。
- 成员变量 ：和以前定义变量几乎是一样的。只不过位置发生了改变。在类中，方法外。
- 成员方法 ：和以前定义方法几乎是一样的。只不过把static去掉，static的作用在面向对象后面课程中再详细
  讲解。

##### 类的定义格式举例：

```java
public class Student {
   	/*成员变量*/
  	String name；//姓名  
   	int age；//年龄
    
    /*成员方法*/
    //学习的方法
    publicvoid study() {
    	System.out.println("好好学习，天天向上");
  	}
  	//吃饭的方法
  	publicvoid eat() {
    	System.out.println("学习饿了要吃饭");
  	}
}
```

----

##### 3.1.4 对象的使用

##### 对象使用的格式

创建对象：

```java
类名	对象名	= new 类名();
```

使用对象访问类中的成员：

```
对象.成员变量;
对象.成员方法();
```

对象使用格式举例：

```java
public class Test01_Student {
  public static void main(String[] args) {
    //创建对象格式：类名 对象名 = new 类名();
    Student s = new Student();
    System.out.println("s:"+s); //cn.itcast.Student@100363
    //直接输出成员变量值
    System.out.println("姓名："+s.name); //null
    System.out.println("年龄："+s.age); //0
    System.out.println("‐‐‐‐‐‐‐‐‐‐");
    //给成员变量赋值
    s.name = "赵丽颖";
    s.age = 18;
    //再次输出成员变量的值
    System.out.println("姓名："+s.name); //赵丽颖
    System.out.println("年龄："+s.age); //18
    System.out.println("‐‐‐‐‐‐‐‐‐‐");
    //调用成员方法
    s.study(); // "好好学习，天天向上"
    s.eat(); // "学习饿了要吃饭"
  }
}
```

成员变量的默认值：

![image-20200204163657915](C:\Users\My\AppData\Roaming\Typora\typora-user-images\image-20200204163657915.png)

---

##### 3.1.5 类与对象的练习

定义手机类：

```java
public class Phone {
  // 成员变量
  String brand; //品牌
  int price; //价格
  String color; //颜色
  // 成员方法
  //打电话
  public void call(String name) {
    System.out.println("给"+name+"打电话");
  }
  //发短信
  public void sendMessage() {
    System.out.println("群发短信");
  }
}
```

定义测试类：

```java
public class Test02Phone {
  public static void main(String[] args) {
    //创建对象
    Phone p = new Phone();
    //输出成员变量值
    System.out.println("品牌："+p.brand);//null
    System.out.println("价格："+p.price);//0
    System.out.println("颜色："+p.color);//null
    System.out.println("‐‐‐‐‐‐‐‐‐‐‐‐");
        //给成员变量赋值
    p.brand = "锤子";
    p.price = 2999;
    p.color = "棕色";
    //再次输出成员变量值
    System.out.println("品牌："+p.brand);//锤子
    System.out.println("价格："+p.price);//2999
    System.out.println("颜色："+p.color);//棕色
    System.out.println("‐‐‐‐‐‐‐‐‐‐‐‐");
    //调用成员方法
    p.call("紫霞");
    p.sendMessage();
  }
}
```

---

##### 3.1.6 对象内存图（作为进阶掌握内容）

**一个对象，调用一个方法内存图：**

![image-20200204164041575](C:\Users\My\AppData\Roaming\Typora\typora-user-images\image-20200204164041575.png)

> 通过上图，我们可以理解，在栈内存中运行的方法，遵循"先进后出，后进先出"的原则。变量p指向堆内存中
> 的空间，寻找方法信息，去执行该方法。
> 但是，这里依然有问题存在。创建多个对象时，如果每个对象内部都保存一份方法信息，这就非常浪费内存
> 了，因为所有对象的方法信息都是一样的。那么如何解决这个问题呢？请看如下图解。

**两个对象，调用同一方法内存图：**

![image-20200204164229309](C:\Users\My\AppData\Roaming\Typora\typora-user-images\image-20200204164229309.png)

> 对象调用方法时，根据对象中方法标记（地址值），去类中寻找方法信息。这样哪怕是多个对象，方法信息
> 只保存一份，节约内存空间。

**一个引用，作为参数传递到方法中的内存图：**

![image-20200204165005771](C:\Users\My\AppData\Roaming\Typora\typora-user-images\image-20200204165005771.png)

> 引用类型作为参数，传递的是地址值。

---

##### 3.1.7 成员变量和局部变量的区别

变量根据**定义位置的不同**，我们给变量起了不同的名字。如下图所示：

![image-20200204170948009](C:\Users\My\AppData\Roaming\Typora\typora-user-images\image-20200204170948009.png)

- 在类中的位置不同 `重点`
  - 成员变量：类中，方法外
  - 局部变量：方法中或者方法声明上 (形式参数)
- 作用范围不一样 `重点`
  - 成员变量：类中
  - 局部变量：方法中
- 初始化值的不同 `重点`
  - 成员变量：有默认值
  - 局部变量：没有默认值。必须先定义，赋值，最后使用
- 在内存中的位置不同 `了解`
  - 成员变量：堆内存
  - 局部变量：栈内存
- 生命周期不同 `了解`
  - 成员变量：随着对象的创建而存在，随着对象的消失而消失
  - 局部变量：随着方法的调用而存在，随着方法的调用完毕而消失

---

#### 3.2 封装

##### 3.2.1 封装概述

**概述**

​		面向对象编程语言是对客观世界的模拟，客观世界里成员变量都是隐藏在对象内部的，外界无法直接操作和修改。封装可以被认为是一个保护屏障，防止该类的代码和数据被其他类随意访问。要访问该类的数据，必须通过指定的方式。适当的封装可以让代码更容易理解与维护，也加强了代码的安全性。

**原则**

将**属性隐藏起来**，若需要访问某个属性，提供**公共方法**对其访问。

---

##### 3.2.2 封装的步骤

		1. 使用  `private` 关键字来修饰成员变量;
  		2. 对需要访问的成员变量，提供对应的一对  `getXxx` 方法 、 `setXxx` 方法

##### 3.2.3 封装的操作--private关键字

**private的含义**

	1. private是一个权限修饰符，代表最小权限；
 	2. 可以修饰成员变量和成员方法；
 	3. 被private修饰后的成员变量和成员方法，只在本类中才能访问；

**private的使用格式：**

```java
private 数据类型 变量名;
```

	1. 使用private修饰成员变量，代码如下：

```java
public class Student {
  private String name;
  private int age;
}
```

	2. 提供  `getXxx` 方法 /  `setXxx` 方法，可以访问成员变量，代码如下：

```java
public class Student {
  private String name;
  private int age;
  public void setName(String n) {
    name = n;
  }
  public String getName() {
    return name;
  }
  public void setAge(int a) {
    age = a;
  }
  public int getAge() {
    return age;
  }
}
```

---

##### 3.2.4 封装优化1--this关键字

我们发现 `setXxx` 方法中的形参名字并不符合见名知意的规定，那么如果修改与成员变量名一致，是否就见名知意了呢？代码如下：

```java
public class Student {
  private String name;
  private int age;
  public void setName(String name) {
    name = name;
  }
  public void setAge(int age) {
    age = age;
  }
}
```

经过修改和测试，我们发现新的问题，成员变量赋值失败了。也就是说，在修改了 setXxx() 的形参变量名后，方
法并没有给成员变量赋值！这是由于形参变量名与成员变量名重名，导致成员变量名被隐藏，方法中的变量名，无
法访问到成员变量，从而赋值失败。所以，我们只能使用this关键字，来解决这个重名问题。

**this的含义**：

this代表所在类的当前对象的引用（地址值），即**对象自己的引用**。

> 注 ：方法被哪个对象调用，方法中的this就代表那个对象。即谁在调用，this就代表谁。

**this使用的格式**：

```java
this.成员变量名;
```

使用  `this` 修饰方法中的变量，解决成员变量被隐藏的问题，代码如下：

```java
public class Student {
  private String name;
  private int age;
  public void setName(String name) {
    //name = name;
    this.name = name;
  }
  public String getName() {
    return name;
  }
  public void setAge(int age) {
    //age = age;
    this.age = age;
  }
  public int getAge() {
    return age;
  }
}
```

> 小贴士：方法中只有一个变量名时，默认也是使用 `this` 修饰，可以省略不写。

---

##### 3.2.5 封装优化2--构造方法

当一个对象被创建时候，构造方法用来初始化该对象，给对象的成员变量赋初始值。

> 小贴士：无论你与否自定义构造方法，所有的类都有构造方法，因为Java自动提供了一个无参数构造方法，
> 一旦自己定义了构造方法，Java自动提供的默认无参数构造方法就会失效。

**构造方法的定义格式**:

```java
修饰符 构造方法名(参数列表) {
	// 方法体
}
```

构造方法的写法上，方法名与它所在的类名相同。它没有返回值，所以不需要返回值类型，甚至不需要void。使用
构造方法后，代码如下：

```java
public class Student {
  private String name;
  private int age;
  // 无参数构造方法
  public Student() {}
  // 有参数构造方法
  public Student(String name,int age) {
    this.name = name;
    this.age = age;
  }
}
```

**注意事项：**

	1. 如果你不提供构造方法，系统会给出无参数构造方法。
 	2. 如果你提供了构造方法，系统将不再提供无参数构造方法。
 	3. 构造方法是可以重载的，既可以定义参数，也可以不定义参数。

---

##### 3.2.6 标准代码--JavaBean

`JavaBean` 是 Java语言编写类的一种标准规范。符合 `JavaBean` 的类，要求类必须是具体的和公共的，并且具有无参数的构造方法，提供用来操作成员变量的 `set` 和 `get` 方法，结构如下：

```java
public class ClassName{
  //成员变量
  //构造方法
  //无参构造方法【必须】
  //有参构造方法【建议】
  //成员方法   
  //getXxx()
  //setXxx()
}
```

编写符合 `JavaBean` 规范的类，以学生类为例，标准代码如下：

```java
public class Student {
  //成员变量
  private String name;
  private int age;
  //构造方法
  public Student() {}
  public Student(String name,int age) {
    this.name = name;
    this.age = age;
  }
  //成员方法
  publicvoid setName(String name) {
    this.name = name;
  }
  public String getName() {
    return name;
  }
  publicvoid setAge(int age) {
    this.age = age;
  }
  publicint getAge() {
    return age;
  }
}
```

测试类，代码如下：

```java
public class TestStudent {
  public static void main(String[] args) {
    //无参构造使用
    Student s= new Student();
    s.setName("柳岩");
    s.setAge(18);
    System.out.println(s.getName()+"‐‐‐"+s.getAge());
    //带参构造使用
    Student s2= new Student("赵丽颖",18);
    System.out.println(s2.getName()+"‐‐‐"+s2.getAge());
  }
}    
```

---

